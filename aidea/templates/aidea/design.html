{% load static %} 
{% csrf_token %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>デザイン</title>
    <script src="{% static 'aidea/design.js' %}" defer></script>
    <!--boostrap CDN経由 .js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'aidea/design.css' %}">
    <link rel="stylesheet" href="{% static 'aidea/design.css' %}">
    <!--boostrap CDN経由 .css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container-fluid">
    <h1 class="row justify-content-center my-5">{{item_name}}のデザインを作る</h1>
    <hr>
    <h2 class="row justify-content-center my-5">デフォルトデザインのダウンロード</h2>
    <p class="row justify-content-center">デザイン用の{{item_name}}の下絵をダウンロードできます。</p>

    
    <a href="{% static 'aidea/images/owan_base.png' %}" download="owan_base.png">
        <div class="row">
            <button class="offset-3 col-6 py-1 my-1 btn btn-outline-dark">お椀のベース画像をダウンロード</button>
        </div>
    </a>
    
    
    <a href="{% static 'aidea/images/osara_base.png' %}" download="osara_base.png">
        <div class="row">
            <button class="offset-3 col-6 py-1 my-1 btn btn-outline-dark">お皿のベース画像をダウンロード</button>
        </div>
    </a>
    

    
    <h2 class="row justify-content-center my-5">注意点</h2>
    <ul class="row">
        {% for tip in tips %}
            <li class="offset-1 col-10">{{tip}}</li>
        {% endfor%}
    </ul>
    <!--推奨質問のボタン-->
    <button class="suggest-btn btn btn-outline-dark" data-command="famous_design" data-item-name="{{ item_name }}">代表的な模様やモチーフは？</button>
    <button class="suggest-btn btn btn-outline-dark" data-command="easy_design" data-item-name="{{ item_name }}">初心者向けの簡単なデザイン案は？</button>
    <button class="suggest-btn btn btn-outline-dark" data-command="drawing_tips" data-item-name="{{ item_name }}">描き方のコツは？</button>
    <button class="suggest-btn btn btn-outline-dark" data-command="avoid_design" data-item-name="{{ item_name }}">デザインで避けるべきことは？</button>
    
    <!--チャット欄-->
    <div id="chat-box"></div>

    <!--自由入力-->
    <input type="text"  id="free-input" placeholder="メッセージを入力">
    <div class="row justify-content-end">
    <button id="free-btn" class="btn btn-dark offset-10 col-2 m-2 py-1">送信</button>
    </div>
    
    <div id="result"></div>
    

    <hr>
    <h2 class="row justify-content-center my-5">デザインのフィードバック</h2>
    <p class="row justify-content-center">描いたデザインのイラストをアップロードして、AIからフィードバックをもらいましょう。</p>
    <div class="row">
        <div class="offset-4 col-4">
        <input type="file" id="feedback-image-upload" accept="image/*">
        </div>
    </div>

    <div class="row">
        <div class="offset-4 col-4">
            <button id="get-feedback-btn" class="m-2 btn btn-outline-danger">フィードバックをもらう</button>
        </div>
    </div>
    
    <div id="feedback-loading" style="display: none; margin-top: 10px;">
        <p>🎨 AIがあなたのデザインを分析しています...</p>
    </div>
    <div id="feedback-result" style="margin-top: 10px; border: 1px solid #eee; padding: 10px; border-radius: 5px; background: #f9f9f9;">
        </div>

    <hr>
    <h2 class="row justify-content-center my-5">アイデアの投稿</h2>
    <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="row">
        <div class="offset-1 col-5">
            <h3>デザインの画像ファイル</h3>
            <input type="file" name="image" accept="image/*">
        </div>
        <div class="col-6">
            <h3>デザインの説明</h3><br>
            <textarea name="description"></textarea>
        </div>
    </div>
    <button type="submit" class="offset-3 col-6 py-1 my-3 btn btn-danger">アイデアを投稿する</button>
</form>

</body>
</html>
